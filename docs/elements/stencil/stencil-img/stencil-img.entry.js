/*! Built with http://stenciljs.com */
const{h:e}=window.StencilImg;class t{constructor(){this.isLoading=!0}reRenderImg(e,t){e!==t&&(console.log(`Custom img element attributes changed. src changed from ${t} to ${e}`),this._removePrevImg(),this._renderImg())}render(){return this._removePrevImg(),this._renderImg(),e("slot",null)}onError(e){console.error("Image load failed\n\n"+`src: ${this.src}`+(e.message?`\nOriginal error: ${e.message}`:""))}_loadImg(e){const t=new Image;t.onload=(()=>{e.style.filter="unset",e.style.backgroundImage=`url("${this.src}")`,e.style.backgroundColor="unset",this.isLoading=!1}),t.onerror=this.onError,t.src=this.src}_renderImg(){const e=document.createElement("div"),t=new Image;this.lazySrc&&(t.src=this.lazySrc,e.style.width="100%",e.style.height="100%",e.style.filter="blur(2px)",e.style.backgroundSize="auto 100%",e.style.backgroundRepeat="no-repeat",e.style.backgroundPosition="center",e.id="lazyImg",e.style.backgroundColor="gray",this.hostEl.shadowRoot.appendChild(e),t.onload=(()=>{this.isLoading&&(e.style.backgroundColor="none",e.style.backgroundImage=`url("${this.lazySrc}")`)})),this.src&&this._loadImg(e)}_removePrevImg(){const e=this.hostEl.shadowRoot.getElementById("lazyImg");e&&this.hostEl.shadowRoot.removeChild(e)}static get is(){return"stencil-img"}static get encapsulation(){return"shadow"}static get properties(){return{hostEl:{elementRef:!0},isLoading:{state:!0},lazySrc:{type:String,attr:"lazy-src"},src:{type:String,attr:"src",watchCallbacks:["reRenderImg"]}}}static get style(){return":host{height:100%;width:100%;display:block}"}}export{t as StencilImg};